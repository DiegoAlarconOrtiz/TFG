---
import GuidePost from "@/components/Guides/GuidePost";
import Archive from "../layouts/Archive.astro";
import PocketBase from 'pocketbase';

async function getItems() {
  const pb = new PocketBase("https://esciclismomalaga.pockethost.io");
  const resultList = await pb.collection("guias").getList(1, 4);
  return resultList.items;
}

const items = await getItems();
console.log(items);
---

<Archive>
    <section class="w-[1245px] mt-24">
    <h1 class="text-center font-bold text-5xl">Nuevas Noticias</h1>
    {
        items.map((item) => (
        <GuidePost title={item.title} date={item.created} thumbnail={`https://esciclismomalaga.pockethost.io/api/files/${item.collectionId}/${item.id}/${item.thumbnail}`} />
        ))
    }
    </section>
</Archive>